<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<<<<<<< HEAD
    <title>Управління опараціями</title>
=======
    <title>Управління операціями</title>
>>>>>>> develop
    <meta charset="UTF-8">
    <link rel="stylesheet" href="/css/styles.css">
</head>
<body>

<<<<<<< HEAD
<div th:replace="fragments/header :: header"></div>
=======
<div th:replace="~{fragments/header :: header}"></div>
>>>>>>> develop

<h2>Запуск операцій</h2>
<h3 id="statusMessage" style="color: red;"></h3>

<form id="operationsForm">
    <label><input type="checkbox" name="updateUserBenchmarkCpu"> Оновити CPU Benchmark</label><br>
    <label><input type="checkbox" name="updateUserBenchmarkGpu"> Оновити GPU Benchmark</label><br>
<<<<<<< HEAD
    <button type="button" onclick="location.href='/gpus'">Оновити дані потужності блоків живлення</button><br><br>
=======
    <button type="button" onclick="location.href='/gpus'">Додати дані потужностей блоків живлення</button><br><br>
>>>>>>> develop
    <label><input type="checkbox" name="updateHotline"> Оновити Hotline</label><br>
    <label><input type="checkbox" name="createPcList"> Створити список ПК</label><br>
    <label><input type="checkbox" name="saveReportToExcel"> Зберегти звіт в Excel</label><br>
    <button type="button" onclick="executeOperation()">Запустити</button>
</form>
<<<<<<< HEAD
=======
<br>
<div class="container">
    <h4>Швидкий старт:</h4>
    <ul >
        <li style="text-align: left;">Для повсякденного використання рекомендовано використовувати останні три пункти.</li>
        <li style="text-align: left;">Якщо ви поставите галочку на всі пункти, всі операції по оновленню пройдуть успішно. Але якщо будуть знайдені нові відеокарти, вони потраплять в базу даних, але не будуть використані, оскільки не буде даних про потужність блоку живлення.</li>
        <li style="text-align: left;">Після додавання нових відеокарт необхідно натискати кнопку «Додати дані потужностей блоків живлення», щоб нові відеокарти пішли в розрахунок. Це слід зробити до запуску пункту "Створити список ПК"</li>
        <li style="text-align: left;">Файли зберігаються в папці «Мої документи» з назвою <strong>pc_configuration_2025-02-05_13-52.xlsx</strong></li>
    </ul>
</div>
>>>>>>> develop

<script>
    function executeOperation() {
        let form = document.getElementById("operationsForm");
        let formData = new FormData(form);

        let statusMessage = document.getElementById("statusMessage");
        statusMessage.innerText = "ЧЕКАЙТЕ ЗАКІНЧЕННЯ.";
        statusMessage.style.color = "red";

        fetch("/operations/execute", {
            method: "POST",
            body: new URLSearchParams(new FormData(form))
        })
            .then(response => response.json())
            .then(data => {
                statusMessage.innerText = data.message;
                statusMessage.style.color = data.success ? "green" : "red";
            })
            .catch(error => {
                statusMessage.innerText = "ПОМИЛКА: " + error;
                statusMessage.style.color = "red";
            });
    }
</script>

</body>
</html>
